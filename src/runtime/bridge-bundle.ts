/**
 * Auto-generated bridge bundle
 * DO NOT EDIT - Generated by build/bundle-bridge.ts
 */
export const BRIDGE_BUNDLE = "// Verdex Bridge Bundle v0.1.3\n// Generated: 2025-10-28T03:19:25.438Z\n\"use strict\";(()=>{var C=Object.defineProperty;var v=(g,e,r)=>e in g?C(g,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):g[e]=r;var d=(g,e,r)=>v(g,typeof e!=\"symbol\"?e+\"\":e,r);var f=class{static getRole(e){let r=this.getExplicitRole(e);if(r){if(r===\"none\"||r===\"presentation\"){let t=this.getImplicitRole(e);if(this.hasPresentationConflictResolution(e))return t||\"generic\"}return r}return this.getImplicitRole(e)||\"generic\"}static getExplicitRole(e){let r=e.getAttribute(\"role\");return r&&r.split(/\\s+/).map(n=>n.trim()).find(n=>this.VALID_ROLES.includes(n))||null}static getImplicitRole(e){switch(e.tagName.toUpperCase()){case\"A\":return e.hasAttribute(\"href\")?\"link\":null;case\"AREA\":return e.hasAttribute(\"href\")?\"link\":null;case\"ARTICLE\":return\"article\";case\"ASIDE\":return\"complementary\";case\"BLOCKQUOTE\":return\"blockquote\";case\"BUTTON\":return\"button\";case\"CAPTION\":return\"caption\";case\"CODE\":return\"code\";case\"DATALIST\":return\"listbox\";case\"DD\":return\"definition\";case\"DEL\":return\"deletion\";case\"DETAILS\":return\"group\";case\"DFN\":return\"term\";case\"DIALOG\":return\"dialog\";case\"DT\":return\"term\";case\"EM\":return\"emphasis\";case\"FIELDSET\":return\"group\";case\"FIGURE\":return\"figure\";case\"FOOTER\":return this.isInLandmarkContext(e)?null:\"contentinfo\";case\"FORM\":return this.hasAccessibleName(e)?\"form\":null;case\"H1\":case\"H2\":case\"H3\":case\"H4\":case\"H5\":case\"H6\":return\"heading\";case\"HEADER\":return this.isInLandmarkContext(e)?null:\"banner\";case\"HR\":return\"separator\";case\"HTML\":return\"document\";case\"IMG\":return e.getAttribute(\"alt\")===\"\"&&!e.getAttribute(\"title\")&&!this.hasGlobalAriaAttribute(e)?\"presentation\":\"img\";case\"INPUT\":return this.getInputRole(e);case\"INS\":return\"insertion\";case\"LI\":return\"listitem\";case\"MAIN\":return\"main\";case\"MARK\":return\"mark\";case\"MATH\":return\"math\";case\"MENU\":return\"list\";case\"METER\":return\"meter\";case\"NAV\":return\"navigation\";case\"OL\":return\"list\";case\"OPTGROUP\":return\"group\";case\"OPTION\":return\"option\";case\"OUTPUT\":return\"status\";case\"P\":return\"paragraph\";case\"PROGRESS\":return\"progressbar\";case\"SEARCH\":return\"search\";case\"SECTION\":return this.hasAccessibleName(e)?\"region\":null;case\"SELECT\":return e.multiple||e.size>1?\"listbox\":\"combobox\";case\"STRONG\":return\"strong\";case\"SUB\":return\"subscript\";case\"SUP\":return\"superscript\";case\"SVG\":return\"img\";case\"TABLE\":return\"table\";case\"TBODY\":return\"rowgroup\";case\"TD\":return this.isInGridContext(e)?\"gridcell\":\"cell\";case\"TEXTAREA\":return\"textbox\";case\"TFOOT\":return\"rowgroup\";case\"TH\":return e.getAttribute(\"scope\")===\"col\"?\"columnheader\":e.getAttribute(\"scope\")===\"row\"?\"rowheader\":this.isInGridContext(e)?\"gridcell\":\"cell\";case\"THEAD\":return\"rowgroup\";case\"TIME\":return\"time\";case\"TR\":return\"row\";case\"UL\":return\"list\";default:return null}}static getInputRole(e){switch(e.type.toLowerCase()){case\"search\":return e.hasAttribute(\"list\")?\"combobox\":\"searchbox\";case\"email\":case\"tel\":case\"text\":case\"url\":case\"\":return e.list?\"combobox\":\"textbox\";case\"hidden\":return\"none\";case\"file\":return\"button\";case\"button\":case\"image\":case\"reset\":case\"submit\":return\"button\";case\"checkbox\":return\"checkbox\";case\"radio\":return\"radio\";case\"range\":return\"slider\";case\"number\":return\"spinbutton\";default:return\"textbox\"}}static hasAccessibleName(e){return e.hasAttribute(\"aria-label\")||e.hasAttribute(\"aria-labelledby\")||e.hasAttribute(\"title\")}static hasGlobalAriaAttribute(e){return[\"aria-atomic\",\"aria-busy\",\"aria-controls\",\"aria-current\",\"aria-describedby\",\"aria-details\",\"aria-dropeffect\",\"aria-flowto\",\"aria-grabbed\",\"aria-hidden\",\"aria-keyshortcuts\",\"aria-label\",\"aria-labelledby\",\"aria-live\",\"aria-owns\",\"aria-relevant\",\"aria-roledescription\"].some(t=>e.hasAttribute(t))}static isInLandmarkContext(e){return!!e.closest(\"article, aside, main, nav, section, [role=article], [role=complementary], [role=main], [role=navigation], [role=region]\")}static isInGridContext(e){let r=e.closest(\"table\");if(!r)return!1;let t=this.getExplicitRole(r);return t===\"grid\"||t===\"treegrid\"}static hasPresentationConflictResolution(e){return this.hasGlobalAriaAttribute(e)||this.isFocusable(e)}static isFocusable(e){if(e.hasAttribute(\"tabindex\")){let t=parseInt(e.getAttribute(\"tabindex\")||\"0\",10);return!isNaN(t)}let r=e.tagName.toUpperCase();return[\"BUTTON\",\"DETAILS\",\"SELECT\",\"TEXTAREA\"].includes(r)?!e.disabled:r===\"A\"||r===\"AREA\"?e.hasAttribute(\"href\"):r===\"INPUT\"?!e.disabled&&e.type!==\"hidden\":!1}static getName(e){let r=this.getRole(e);if(this.NAMING_PROHIBITED_ROLES.includes(r))return\"\";let t=e.getAttribute(\"aria-labelledby\");if(t){let a=t.split(/\\s+/).map(l=>document.getElementById(l)).filter(l=>l!==null).map(l=>this.getTextContent(l)).filter(l=>l.length>0);if(a.length>0)return a.join(\" \").trim()}let n=e.getAttribute(\"aria-label\");if(n&&n.trim())return n.trim();let i=this.getNativeLabel(e);if(i)return i;if(this.NAME_FROM_CONTENT_ROLES.includes(r)){let a=this.getTextContent(e);if(a)return a}let s=e.getAttribute(\"title\");if(s&&s.trim())return s.trim();if(e.tagName===\"INPUT\"||e.tagName===\"TEXTAREA\"){let a=e.getAttribute(\"placeholder\");if(a&&a.trim())return a.trim()}return\"\"}static getNativeLabel(e){let r=e.tagName.toUpperCase();if([\"INPUT\",\"TEXTAREA\",\"SELECT\"].includes(r)){let t=e.id;if(t){let i=document.querySelector(`label[for=\"${t}\"]`);if(i)return this.getTextContent(i)}let n=e.closest(\"label\");if(n)return this.getTextContent(n)}if(r===\"IMG\"){let t=e.getAttribute(\"alt\");if(t!==null)return t}return\"\"}static getTextContent(e){if(e instanceof HTMLInputElement){if([\"submit\",\"reset\",\"button\"].includes(e.type))return e.value||e.type;if(e.type===\"image\")return e.alt||e.value||\"Submit\"}return e instanceof HTMLButtonElement,e.textContent?.trim()||\"\"}static getAriaProperties(e,r){let t={};if([\"checkbox\",\"radio\",\"menuitemcheckbox\",\"menuitemradio\",\"option\",\"switch\"].includes(r)){let o=e.getAttribute(\"aria-checked\");o===\"mixed\"?t.checked=\"mixed\":o===\"true\"?t.checked=!0:o===\"false\"?t.checked=!1:e instanceof HTMLInputElement&&(t.checked=e.checked)}if([\"button\",\"checkbox\",\"combobox\",\"gridcell\",\"link\",\"listbox\",\"menuitem\",\"menuitemcheckbox\",\"menuitemradio\",\"option\",\"radio\",\"searchbox\",\"slider\",\"spinbutton\",\"switch\",\"tab\",\"textbox\",\"treeitem\"].includes(r)&&(e.getAttribute(\"aria-disabled\")===\"true\"?t.disabled=!0:(e instanceof HTMLInputElement||e instanceof HTMLButtonElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&(t.disabled=e.disabled)),[\"button\",\"combobox\",\"gridcell\",\"link\",\"menuitem\",\"row\",\"rowheader\",\"tab\",\"treeitem\"].includes(r)){let o=e.getAttribute(\"aria-expanded\");o===\"true\"?t.expanded=!0:o===\"false\"&&(t.expanded=!1)}if([\"heading\",\"listitem\",\"row\",\"treeitem\"].includes(r)){let o=e.getAttribute(\"aria-level\");if(o){let h=parseInt(o,10);isNaN(h)||(t.level=h)}else r===\"heading\"&&/^H[1-6]$/.test(e.tagName)&&(t.level=parseInt(e.tagName[1],10))}if([\"button\"].includes(r)){let o=e.getAttribute(\"aria-pressed\");o===\"mixed\"?t.pressed=\"mixed\":o===\"true\"?t.pressed=!0:o===\"false\"&&(t.pressed=!1)}if([\"gridcell\",\"option\",\"row\",\"tab\",\"treeitem\"].includes(r)){let o=e.getAttribute(\"aria-selected\");o===\"true\"?t.selected=!0:o===\"false\"&&(t.selected=!1)}return t.active=document.activeElement===e,t}static isVisibleForAria(e){if(this.IGNORED_ELEMENTS.includes(e.tagName))return!1;let r=e;for(;r;){if(r.getAttribute(\"aria-hidden\")===\"true\")return!1;r=r.parentElement}return this.isElementVisible(e)}static isElementVisible(e){let r=e;for(;r;){let t=window.getComputedStyle(r);if(t.display===\"none\"||t.display===\"contents\"&&r.nodeName!==\"SLOT\"&&!Array.from(r.children).some(i=>this.isElementVisible(i))||t.visibility===\"hidden\"&&!(r.tagName===\"OPTION\"&&r.closest(\"select\")))return!1;r=r.parentElement}return!(e.parentElement?.shadowRoot&&!e.assignedSlot)}static isInteractive(e,r){let n=window.getComputedStyle(e).pointerEvents!==\"none\",i=this.isFocusable(e),s=this.INTERACTIVE_ROLES.includes(r),a=this.INTERACTIVE_ELEMENTS.includes(e.tagName);return n&&(i||s||a)}};d(f,\"VALID_ROLES\",[\"alert\",\"alertdialog\",\"application\",\"article\",\"banner\",\"blockquote\",\"button\",\"caption\",\"cell\",\"checkbox\",\"code\",\"columnheader\",\"combobox\",\"complementary\",\"contentinfo\",\"definition\",\"deletion\",\"dialog\",\"directory\",\"document\",\"emphasis\",\"feed\",\"figure\",\"form\",\"generic\",\"grid\",\"gridcell\",\"group\",\"heading\",\"img\",\"insertion\",\"link\",\"list\",\"listbox\",\"listitem\",\"log\",\"main\",\"mark\",\"marquee\",\"math\",\"meter\",\"menu\",\"menubar\",\"menuitem\",\"menuitemcheckbox\",\"menuitemradio\",\"navigation\",\"none\",\"note\",\"option\",\"paragraph\",\"presentation\",\"progressbar\",\"radio\",\"radiogroup\",\"region\",\"row\",\"rowgroup\",\"rowheader\",\"scrollbar\",\"search\",\"searchbox\",\"separator\",\"slider\",\"spinbutton\",\"status\",\"strong\",\"subscript\",\"superscript\",\"switch\",\"tab\",\"table\",\"tablist\",\"tabpanel\",\"term\",\"textbox\",\"time\",\"timer\",\"toolbar\",\"tooltip\",\"tree\",\"treegrid\",\"treeitem\"]),d(f,\"NAME_FROM_CONTENT_ROLES\",[\"button\",\"cell\",\"checkbox\",\"columnheader\",\"gridcell\",\"heading\",\"link\",\"menuitem\",\"menuitemcheckbox\",\"menuitemradio\",\"option\",\"radio\",\"row\",\"rowheader\",\"switch\",\"tab\",\"tooltip\",\"treeitem\"]),d(f,\"NAMING_PROHIBITED_ROLES\",[\"caption\",\"code\",\"definition\",\"deletion\",\"emphasis\",\"generic\",\"insertion\",\"mark\",\"paragraph\",\"presentation\",\"strong\",\"subscript\",\"superscript\",\"term\",\"time\"]),d(f,\"INTERACTIVE_ROLES\",[\"button\",\"link\",\"textbox\",\"checkbox\",\"radio\",\"combobox\",\"listbox\",\"menuitem\",\"menuitemcheckbox\",\"menuitemradio\",\"tab\",\"switch\",\"slider\",\"spinbutton\",\"searchbox\",\"option\"]),d(f,\"IGNORED_ELEMENTS\",[\"SCRIPT\",\"STYLE\",\"NOSCRIPT\",\"TEMPLATE\"]),d(f,\"INTERACTIVE_ELEMENTS\",[\"A\",\"BUTTON\",\"INPUT\",\"SELECT\",\"TEXTAREA\",\"DETAILS\"]);var T=class{constructor(e,r={}){d(this,\"bridge\");d(this,\"config\");d(this,\"visited\",new Set);this.bridge=e,this.config=r}generate(){console.log(\"Starting snapshot...\");try{this.bridge.elements.clear(),this.bridge.counter=0,this.visited.clear();let r={role:\"WebArea\",name:\"\",children:this.buildAriaTree(document.body,!0),element:document.body};this.normalizeGenericRoles(r);let t=[];return this.renderTree(r,t,\"\"),{text:t.join(`\n`),elementCount:this.bridge.elements.size}}catch(e){return console.error(\"Snapshot error:\",e),{text:`Error: ${e.message}`,elementCount:0}}}buildAriaTree(e,r){if(this.visited.has(e))return[];if(this.visited.add(e),e.nodeType===Node.TEXT_NODE&&e.nodeValue){if(!r)return[];let a=this.normalizeWhitespace(e.nodeValue);if(a&&a.length>0){let l=e.parentElement;if(l&&f.getRole(l)!==\"textbox\")return[a]}return[]}if(e.nodeType!==Node.ELEMENT_NODE)return[];let t=e,n=f.isVisibleForAria(t);if(!n)return this.buildChildrenTree(t,!1);let i=this.createAriaNode(t);if(!i)return this.buildChildrenTree(t,n);let s=this.getInputValue(t);if(s!==null&&s.length>0){i.children=[s];let a=this.buildAriaOwnedTree(t);i.children.push(...a)}else{let a=this.buildChildrenTree(t,n),l=this.buildAriaOwnedTree(t);i.children=[...a,...l]}return[i]}createAriaNode(e){let r=f.getRole(e);if(!r||r===\"presentation\"||r===\"none\")return null;let t=f.getName(e),n=f.getAriaProperties(e,r);if(r===\"generic\"){let s=window.getComputedStyle(e);if((s.display===\"inline\"||s.display===\"inline-block\")&&e.childNodes.length===1&&e.childNodes[0].nodeType===Node.TEXT_NODE)return null}let i={role:r,name:t,children:[],element:e,...n};if(this.extractElementProperties(e,i),f.isInteractive(e,r)){let s=`e${++this.bridge.counter}`;i.ref=s;let a={element:e,tagName:e.tagName,role:r,name:t,attributes:this.bridge.getAttributes(e)};this.bridge.elements.set(s,a)}return i}buildNodeLine(e,r){let t=`${r}- ${e.role}`;if(e.name&&(t+=` ${this.yamlEscapeValueIfNeeded(e.name)}`),e.checked===\"mixed\"?t+=\" [checked=mixed]\":e.checked===!0&&(t+=\" [checked]\"),e.disabled&&(t+=\" [disabled]\"),e.expanded&&(t+=\" [expanded]\"),e.active&&(t+=\" [active]\"),e.level&&(t+=` [level=${e.level}]`),e.pressed===\"mixed\"?t+=\" [pressed=mixed]\":e.pressed===!0&&(t+=\" [pressed]\"),e.selected&&(t+=\" [selected]\"),e.props&&Object.keys(e.props).length>0){let n=Object.entries(e.props).map(([i,s])=>`${i}=\"${s.replace(/\"/g,'\\\\\"')}\"`).join(\" \");t+=` [${n}]`}return e.ref&&(t+=` [ref=${e.ref}]`),t}extractElementProperties(e,r){let t={};if(r.role===\"link\"&&e.hasAttribute(\"href\")&&(t.url=e.getAttribute(\"href\")),r.role===\"textbox\"||r.role===\"searchbox\"){let n=e.getAttribute(\"placeholder\");n&&(t.placeholder=n)}if(e instanceof HTMLImageElement&&e.src&&(t.src=e.src),r.role===\"button\"){let n=e.getAttribute(\"type\");(n===\"submit\"||n===\"reset\")&&(t.type=n)}if(r.role===\"combobox\"){let n=e.getAttribute(\"autocomplete\");n&&(t.autocomplete=n)}Object.keys(t).length>0&&(r.props=t)}getInputValue(e){return!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLInputElement&&[\"checkbox\",\"radio\",\"file\",\"button\",\"submit\",\"reset\",\"image\",\"hidden\"].includes(e.type)?null:e.value}buildChildrenTree(e,r){let t=[];if(r){let n=this.getCSSContent(e,\"::before\");n&&t.push(n)}if(e.nodeName===\"SLOT\"){let i=e.assignedNodes();if(i.length>0){if(i.forEach(s=>{t.push(...this.buildAriaTree(s,r))}),r){let s=this.getCSSContent(e,\"::after\");s&&t.push(s)}return t}}if(Array.from(e.childNodes).forEach(n=>{n.assignedSlot||t.push(...this.buildAriaTree(n,r))}),e.shadowRoot&&Array.from(e.shadowRoot.childNodes).forEach(n=>{t.push(...this.buildAriaTree(n,r))}),r){let n=this.getCSSContent(e,\"::after\");n&&t.push(n)}return t}buildAriaOwnedTree(e){let r=e.getAttribute(\"aria-owns\");if(!r)return[];let t=r.split(/\\s+/).map(i=>document.getElementById(i)).filter(i=>i!==null),n=[];return t.forEach(i=>{n.push(...this.buildAriaTree(i,!0))}),n}normalizeGenericRoles(e){let r=[];for(let n of e.children||[]){if(typeof n==\"string\"){r.push(n);continue}let i=this.normalizeGenericRoles(n);r.push(...i)}return e.role===\"generic\"&&r.length<=1&&r.every(n=>typeof n!=\"string\"&&!!n.ref)?r:(e.children=r,[e])}renderTree(e,r,t){if(typeof e==\"string\"){let i=this.yamlEscapeValueIfNeeded(e);r.push(`${t}- text: ${i}`);return}if(e.role===\"WebArea\"){for(let i of e.children)this.renderTree(i,r,t);return}let n=this.buildNodeLine(e,t);r.push(n);for(let i of e.children)this.renderTree(i,r,t+\"  \")}normalizeWhitespace(e){return e.replace(/[\\u200b\\u00ad]/g,\"\").replace(/[\\r\\n\\s\\t]+/g,\" \").trim()}getCSSContent(e,r){let n=window.getComputedStyle(e,r).content;if(!n||n===\"none\"||n===\"normal\")return\"\";let i=n.replace(/^[\"']|[\"']$/g,\"\");return i=i.replace(/\\\\([0-9a-fA-F]{1,6})\\s?/g,(s,a)=>String.fromCharCode(parseInt(a,16))),i}yamlEscapeKeyIfNeeded(e){return/[:\\[\\]{}#&*!|>'\"%@`]/.test(e)||e.startsWith(\"-\")?JSON.stringify(e):e}yamlEscapeValueIfNeeded(e){return e?/^(true|false|null|~)$/i.test(e)||/^[0-9]/.test(e)||/[:\\[\\]{}#&*!|>'\"%@`\\n\\r]/.test(e)?JSON.stringify(e):e:'\"\"'}};var p=class{static buildShallowOutline(e,r=6,t){let n=[],i=new Set,s=[\":scope > h1\",\":scope > h2\",\":scope > h3\",\":scope > h4\",\":scope > h5\",\":scope > h6\",\":scope > button\",\":scope > a\",\":scope > label\",\":scope > [data-testid]\",\":scope > span\",\":scope > strong\",\":scope > em\"].join(\",\"),a=Array.from(e.querySelectorAll(s)),l;if(t){let c=new Set(a);l=new Map,t.forEach(o=>{c.has(o.element)&&l.set(o.element,o)})}for(let c of a){if(n.length>=r)break;let o=c.getAttribute(\"role\")||void 0,h,m=l?.get(c);m&&(o=o||m.role||void 0,h=m.name||void 0);let x=o?.toLowerCase(),u=c.tagName?.toLowerCase(),E=(c.textContent||\"\").trim(),N=c.getAttribute(\"data-testid\")||void 0,S=c.getAttribute(\"aria-label\")||void 0,I=(E&&E.length<=200?E:void 0)||h||S;if(!I&&!N&&!x)continue;let R=`${x||u}|${I||\"\"}|${N||\"\"}`;i.has(R)||(i.add(R),n.push({role:o,tag:u,text:I,testid:N}))}return n}static getRelevantAttributes(e){let r={};return this.RELEVANT_ATTRIBUTES.forEach(t=>{let n=e.getAttribute(t);n&&(r[t]=n)}),r}static findContainedRefs(e,r){let t=[];return r.forEach((n,i)=>{e.contains(n.element)&&n.element!==e&&t.push(i)}),t}static extractMeaningfulTexts(e){let r=[],t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{if(s.nodeType===Node.TEXT_NODE){let a=s.textContent?.trim();if(a&&a.length>0)return NodeFilter.FILTER_ACCEPT}else if(s.nodeType===Node.ELEMENT_NODE){let a=s;if(this.SEMANTIC_ELEMENTS.includes(a.tagName))return NodeFilter.FILTER_ACCEPT}return NodeFilter.FILTER_SKIP}}),n;for(;n=t.nextNode();)if(n.nodeType===Node.TEXT_NODE){let s=n.textContent?.trim();s&&s.length>0&&r.push(s)}else if(n.nodeType===Node.ELEMENT_NODE){let s=n.textContent?.trim();s&&s.length>0&&r.push(s)}return[...new Set(r)].filter(s=>s.length>1&&s.trim().length>0)}static getAllAttributes(e){let r={};for(let t=0;t<e.attributes.length;t++){let n=e.attributes[t];r[n.name]=n.value}return r}static getSiblingIndex(e){return e.parentElement?Array.from(e.parentElement.children).indexOf(e):0}static findParentRef(e,r){let t=e.parentElement;for(;t;){for(let[n,i]of r.entries())if(i.element===t)return n;t=t.parentElement}return null}};d(p,\"RELEVANT_ATTRIBUTES\",[\"class\",\"id\",\"data-testid\",\"role\",\"aria-label\"]),d(p,\"SEMANTIC_ELEMENTS\",[\"H1\",\"H2\",\"H3\",\"H4\",\"H5\",\"H6\",\"BUTTON\",\"A\",\"LABEL\"]);var b=class{constructor(e,r={}){d(this,\"bridge\");d(this,\"config\");this.bridge=e,this.config=r}getAncestors(e){let r=this.bridge.elements.get(e);if(!r)return null;let t=[],n=r.element.parentElement,i=1;for(;n&&n!==document.body;){let s={level:i,tagName:n.tagName.toLowerCase(),attributes:p.getRelevantAttributes(n),childElements:n.children.length,containsRefs:p.findContainedRefs(n,this.bridge.elements)};t.push(s),n=n.parentElement,i++}return{target:{ref:e,tagName:r.tagName.toLowerCase(),text:r.element.textContent?.trim()||\"\"},ancestors:t}}getSiblings(e,r){let t=this.bridge.elements.get(e);if(!t)return null;let n=t.element;for(let c=0;c<r;c++){if(!n?.parentElement||n.parentElement===document.body)return null;n=n.parentElement}if(!n)return null;let i=t.element;for(let c=0;c<Math.max(r-1,0)&&i?.parentElement;c++)i=i.parentElement;let s=i&&i instanceof Element&&i.parentElement===n?i:null,a=s&&n?Array.from(n.children).indexOf(s):null,l=Array.from(n.children).map((c,o)=>({index:o,tagName:c.tagName.toLowerCase(),attributes:p.getRelevantAttributes(c),containsText:p.extractMeaningfulTexts(c),outline:p.buildShallowOutline(c,this.config.maxOutlineItems??6,this.bridge.elements)}));return{ancestorLevel:r,containerAt:{tagName:n.tagName.toLowerCase(),attributes:p.getRelevantAttributes(n)},targetSiblingIndex:a,siblings:l}}getDescendants(e,r){try{let t=this.bridge.elements.get(e);if(!t)return{error:`Element ${e} not found`,ancestorAt:null,descendants:[],totalDescendants:0,maxDepthReached:0};let n=t.element;for(let l=0;l<r;l++){if(!n.parentElement||n.parentElement===document.body)return{error:`Ancestor level ${r} is too high - reached document.body`,ancestorAt:null,descendants:[],totalDescendants:0,maxDepthReached:0};n=n.parentElement}let i=this.config.maxDepth??4,s=this.traverseDescendants(n,i,0,0),a=0;if(s&&s.length>0){let l=s.map(c=>c?.depth||1);a=Math.max(...l)}return{ancestorAt:{level:r,tagName:n.tagName.toLowerCase(),attributes:p.getRelevantAttributes(n)},descendants:s||[],totalDescendants:s?s.length:0,maxDepthReached:a}}catch(t){return{error:`Error in get_descendants: ${t.message}`,ancestorAt:null,descendants:[],totalDescendants:0,maxDepthReached:0}}}traverseDescendants(e,r=4,t=0,n=0){let i=this.config.maxDescendants??100;if(t>=r||!e?.children||n>=i)return[];let s=[],a=this.config.maxSiblings??15;return Array.from(e.children).slice(0,a).forEach((l,c)=>{let o={depth:t+1,index:c,tagName:l.tagName.toLowerCase(),attributes:p.getRelevantAttributes(l)},h=Array.from(this.bridge.elements.entries()).find(([u,E])=>E.element===l)?.[0];if(h){o.ref=h;let u=this.bridge.elements.get(h);u&&(o.role=u.role,o.name=u.name)}let m=l?.childNodes?Array.from(l.childNodes).filter(u=>u.nodeType===Node.TEXT_NODE).map(u=>u.textContent?.trim()).filter(u=>u&&u.length>0).join(\" \"):\"\";if(m&&m.length>0&&m.length<200&&(o.directText=m),[\"H1\",\"H2\",\"H3\",\"H4\",\"H5\",\"H6\",\"P\",\"SPAN\",\"LABEL\",\"BUTTON\",\"A\"].includes(l.tagName)){let u=l.textContent?.trim();u&&u.length>0&&u.length<200&&u!==m&&(o.fullText=u)}if(l?.children&&l.children.length>0){o.childCount=l.children.length;let u=this.traverseDescendants(l,r,t+1,n+s.length);u&&u.length>0&&(o.descendants=u)}s.push(o)}),s}};var A=class{static create(e={}){return{elements:new Map,counter:0,snapshot(){return new T(this,e).generate()},click(t){let n=this.elements.get(t);if(!n)throw new Error(`Element ${t} not found`);n.element.click()},type(t,n){let i=this.elements.get(t);if(!i)throw new Error(`Element ${t} not found`);let s=i.element;s.focus(),s.value=n,s.dispatchEvent(new Event(\"input\",{bubbles:!0})),s.dispatchEvent(new Event(\"change\",{bubbles:!0}))},get_ancestors(t){return new b(this,e).getAncestors(t)},get_siblings(t,n){return new b(this,e).getSiblings(t,n)},get_descendants(t,n){return new b(this,e).getDescendants(t,n)},getAttributes(t){return p.getAllAttributes(t)}}}};var y=\"0.1.3\";function L(g){return A.create(g)}function X(){let g=globalThis.__VerdexBridgeFactory__;if(!g)throw new Error(\"Verdex bridge factory not initialized\");return g}(function(){let e=Object.freeze({create:L,version:y}),r=globalThis.__VerdexBridgeFactory__;(!r||r.version!==y)&&(r&&delete globalThis.__VerdexBridgeFactory__,Object.defineProperty(globalThis,\"__VerdexBridgeFactory__\",{value:e,writable:!1,enumerable:!1,configurable:!0}))})();})();\n";
export const BRIDGE_VERSION = "0.1.3";
